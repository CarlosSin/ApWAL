<h5 class="text-center text-xl font-bold text-gray-800 mb-8">Salud Ocupacional</h5>

<form autocomplete="off" [formGroup]="myForm" (ngSubmit)="guardarYAvanzar()">

  <!-- Nivel de Bioseguridad -->
  <label class="block text-sm font-medium text-gray-700 mb-1">
    Clasifique su protocolo de acuerdo al Nivel de Bioseguridad:
  </label>
  <div class="flex flex-col items-start gap-4 mb-6">
    <label class="form-label flex items-center gap-2.5">
      <input type="radio" class="radio" formControlName="nivel_bioseguridad" value="1" />
      Nivel 1
    </label>
    <label class="form-label flex items-center gap-2.5">
      <input type="radio" class="radio" formControlName="nivel_bioseguridad" value="2" />
      Nivel 2
    </label>
    <label class="form-label flex items-center gap-2.5">
      <input type="radio" class="radio" formControlName="nivel_bioseguridad" value="3" />
      Nivel 3
    </label>
  </div>

  <!-- Agentes peligrosos por animal -->
  <label class="block text-sm font-medium text-gray-700 mb-3">
    Descripción de agentes peligrosos:
  </label>

  <div formArrayName="datosAnimales" class="flex flex-col gap-8">
    <div *ngFor="let grupo of datosAnimales.controls; let i = index" [formGroupName]="i" class="p-4 border rounded-lg bg-gray-50">
      <h3 class="text-lg font-semibold mb-2">Animal {{ i + 1 }}</h3>

      <label class="block text-sm font-medium text-gray-700 mb-1">Agentes infecciosos:</label>
      <input type="text" formControlName="agentes_infecciosos" class="input input-bordered w-full mb-3" />

      <label class="block text-sm font-medium text-gray-700 mb-1">Radioisótopos:</label>
      <input type="text" formControlName="radioisotopos" class="input input-bordered w-full mb-3" />

      <label class="block text-sm font-medium text-gray-700 mb-1">Carcinógenos:</label>
      <input type="text" formControlName="carcinogenos" class="input input-bordered w-full mb-3" />

      <label class="block text-sm font-medium text-gray-700 mb-1">Tóxicos:</label>
      <input type="text" formControlName="toxicos" class="input input-bordered w-full" />
    </div>
  </div>

  <!-- Descripción equipo -->
  <div class="mt-8">
    <label class="block text-sm font-medium text-gray-700 mb-1">
      Equipo y medidas adicionales de protección:
    </label>
    <textarea rows="6" formControlName="equipDescription"
      class="textarea textarea-bordered w-full"></textarea>
    @if (formUtils.isValidField(myForm, 'equipDescription')) {
      <span class="text-red-600 text-sm">
        {{ formUtils.getFieldError(myForm, 'equipDescription') }}
      </span>
    }
  </div>

  <!-- Descripción procedimientos -->
  <div class="mt-6">
    <label class="block text-sm font-medium text-gray-700 mb-1">
      Procedimientos para la disposición de cadáveres y material contaminado:
    </label>
    <textarea rows="6" formControlName="procDescription"
      class="textarea textarea-bordered w-full"></textarea>
    @if (formUtils.isValidField(myForm, 'procDescription')) {
      <span class="text-red-600 text-sm">
        {{ formUtils.getFieldError(myForm, 'procDescription') }}
      </span>
    }
  </div>

  <!-- Botones -->
  <div class="flex justify-end gap-4 mt-10">
    <button type="submit" class="btn btn-success">Guardar y avanzar</button>
    <button type="button" (click)="guardarSinAvanzar()" class="btn btn-light">Guardar</button>
  </div>
</form>
